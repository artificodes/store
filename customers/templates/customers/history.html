{% for history in histories %}
{% if history.content_type == 'share' %}
<div class="card  m-0  uk-text-left rounded-0  btn p-2 off-canvas-btn shadow-none btn-white" id="{{history.transactionid}}"
    style="width: 100%;display: inline-block;"
    contenturl="{% url 'customer_transaction_details' transaction=history.content_type transactionid=history.transactionid %}">
    <span
        class="uk-position-top-left ml-0 rounded-right {% if history.from_customer == customer %}  bg-indigo {% else %} bg-green {% endif %}  text-white pl-1 pr-1 mt-1 uk-text-bold"
        style="font-size: 8px;">
        share
    </span>
    <span class="uk-position-top-right mr-1">
        <i class="fa fa-share-alt {% if history.from_customer == customer %}  text-danger {% else %} text-green {% endif %}"
            style="font-size: 10px;"></i>
    </span>

    <div class="card-body p-1 mt-3" style="">
        <div class="col-csxx-x-14" style="font-size: 10px;">
            <div class="col-csxx-x-14">
                <p class="" style="font-weight: bold;font-size: 11px;"><span
                        style="font-weight: bold;font-size: 11px;">Amt:</span>
                    {% if history.formatted_amount %}
                    N{{history.formatted_amount}}
                    {% else %}
                    N{{history.amount}}
                    {% endif %}
                </p>
            </div>

            <div class="col-csxx-x-14">
                <p class="card-text" style="font-size: 10px;"><span
                        style="font-weight: bold;font-size: 10px;">Date/Time:</span>
                    {{history.date_time_added}}

                </p>

            </div>

        </div>

    </div>
</div>


{% elif history.content_type == 'interest' %}
<div class="card off-canvas-btn  m-0  uk-text-left rounded-0  btn p-2 shadow-none btn-white" id="{{history.transactionid}}"
    style="width: 100%;display: inline-block;" 
    contenturl="{% url 'customer_transaction_details' transaction=history.content_type transactionid=history.transactionid %}">
    <span class="uk-position-top-left ml-0 rounded-right bg-green  text-white pl-1 pr-1 mt-1 uk-text-bold"
        style="font-size: 8px;">
        interest
    </span>
    <span class="uk-position-top-right mr-1">
        <i class="fa fa-plus text-green" style="font-size: 10px;"></i>
    </span>

    <div class="card-body p-1 mt-3" style="">
        <div class="col-csxx-x-14" style="font-size: 10px;">
            <div class="col-csxx-x-14">
                <p class="" style="font-weight: bold;font-size: 11px;"><span
                        style="font-weight: bold;font-size: 11px;">Amt:</span>
                    {% if history.formatted_amount %}
                    N{{history.formatted_amount}}
                    {% else %}
                    N{{history.amount}}
                    {% endif %}
                </p>
            </div>

            <div class="col-csxx-x-14">
                <p class="card-text" style="font-size: 10px;"><span
                        style="font-weight: bold;font-size: 10px;">Date/Time:</span>
                    {{history.date_time_added}}

                </p>

            </div>

        </div>

    </div>
</div>


{% elif history.content_type == 'transfer' %}
<div class="card  m-0  uk-text-left rounded-0 off-canvas-btn  btn p-2 shadow-none btn-white" id="{{history.transactionid}}"
    style="width: 100%;display: inline-block;"
    contenturl="{% url 'customer_transaction_details' transaction=history.content_type transactionid=history.transactionid %}">
    <span class="uk-position-top-left ml-0 rounded-right bg-red  text-white pl-1 pr-1 mt-1 uk-text-bold"
        style="font-size: 8px;">
        transfer
    </span>
    <span class="uk-position-top-right mr-1">
        <i class="fa fa-arrow-up text-danger" style="font-size: 10px;"></i>
    </span>

    <div class="card-body p-1 mt-3" style="">
        <div class="col-csxx-x-14" style="font-size: 10px;">
            <div class="col-csxx-x-14">
                <p class="" style="font-weight: bold;font-size: 11px;"><span
                        style="font-weight: bold;font-size: 11px;">Amt:</span>
                    {% if history.formatted_amount %}
                    N{{history.formatted_amount}}
                    {% else %}
                    N{{history.amount}}
                    {% endif %}
                </p>
            </div>

            <div class="col-csxx-x-14">
                <p class="card-text" style="font-size: 10px;"><span
                        style="font-weight: bold;font-size: 10px;">Date/Time:</span>
                    {{history.date_time_added}}

                </p>

            </div>

        </div>

    </div>
</div>


{% elif history.content_type == 'withdrawal' %}
<div class="card m-0  uk-text-left rounded-0 off-canvas-btn  shadow-none btn p-2 btn-white" id="{{history.transactionid}}"
    style="width: 100%;display: inline-block;"
    contenturl="{% url 'customer_transaction_details' transaction=history.content_type transactionid=history.transactionid %}">
    <span class="uk-position-top-left ml-0 rounded-right bg-warning  text-white pl-1 pr-1 mt-1 uk-text-bold"
        style="font-size: 8px;">
        withdrawal
    </span>

    <span class="uk-position-top-right mr-1">
        <i class="fa fa-arrow-right text-danger" style="font-size: 10px;"></i>
    </span>

    <div class="card-body p-1 mt-3" style="">
        <div class="col-csxx-x-14" style="font-size: 10px;">
            <div class="col-csxx-x-14">
                <p class="" style="font-weight: bold;font-size: 11px;"><span
                        style="font-weight: bold;font-size: 11px;">Amt:</span>
                    {% if history.formatted_amount %}
                    N{{history.formatted_amount}}
                    {% else %}
                    N{{history.amount}}
                    {% endif %}
                </p>
            </div>

            <div class="col-csxx-x-14">
                <p class="card-text" style="font-size: 10px;"><span
                        style="font-weight: bold;font-size: 10px;">Date/Time:</span>
                    {{history.date_time_added}}

                </p>

            </div>

        </div>

    </div>
</div>


{% endif %}
{% endfor %}

{% if histories.has_next %}
<div class="load-more text-light text-center mt-0 position-relative" next-page="{{histories.next_page_number}}"
    target="#histories" contenturl="{% url 'customer_histories' %}">

    <i class="fa fa-spinner m-0 text-primary rotate-loader-360"
        style="width: max-content;height: max-content;font-size: smaller;"></i>
    <span class="text-sm p-1">
        Loading more</span>


</div>
{% endif %}


<script>


    $('.off-canvas-btn').off()
    {
        (function ($) {
            $('.off-canvas-btn').on('click', function () {
                UIkit.offcanvas($('#offcanvas-content')).show();
                var link = $(this);
                loadOffCanvasContent(link)
            })
        }(jQuery))
    }


    $('.load-more').off()


</script>
<script>
    $('.load-more').beacon({
        enteronce: false,
        onenter: function (el) {
            var link = $(el)
            var targetElement = $(link.attr('target'))
            $.ajax({
                beforeSend: function () {
                },
                complete: function () {
                },
                type: 'get',
                url: link.attr('contenturl'),
                data: {
                    'csrfmiddlewaretoken': window.CSRF_TOKEN, // from index.html
                    'page':link.attr('next-page'),
                },
                success: function (response) {

                    if (response.content) {
                        link.remove()
                        targetElement.append(response.content);
                    }


                },
                error: function (xhr, status, error) {
                    messageModal('We encountered an error. Try again')
                }
            });

        }
    });
</script>